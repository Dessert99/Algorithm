[https://school.programmers.co.kr/learn/courses/30/lessons/301649?language=mysql](https://school.programmers.co.kr/learn/courses/30/lessons/301649?language=mysql)
```sql
SELECT ID, CASE
              WHEN (MY_RANK / TOTAL_COUNT) <= 0.25 THEN  "CRITICAL"
              WHEN (MY_RANK / TOTAL_COUNT) <= 0.5 THEN "HIGH"
              WHEN (MY_RANK / TOTAL_COUNT) <= 0.75 THEN "MEDIUM"
              ELSE "LOW"
            END AS COLONY_NAME

FROM (
SELECT O.ID,

(SELECT COUNT(I.ID)
FROM ECOLI_DATA AS I
WHERE O.SIZE_OF_COLONY < I.SIZE_OF_COLONY) + 1
AS MY_RANK,

(SELECT COUNT(*)
 FROM ECOLI_DATA)
 AS TOTAL_COUNT

FROM ECOLI_DATA AS O
)
AS TMP

ORDER BY ID 
```
### üîó ÌíÄÏù¥
üí° Î∞îÍπ• ÏøºÎ¶¨, ÎÇ¥Î∂Ä ÏøºÎ¶¨ÏóêÏÑú Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§ Î≥ÑÏπ≠ÏùÑ Îã¨ÏïÑ Íµ¨Î∂ÑÌï¥Ïïº ÌïúÎã§.
    - ÏÑúÎ∏å ÏøºÎ¶¨ÏóêÏÑú Î∞îÍπ• ÎÇòÏùò Îì±ÏàòÏôÄ ÎπÑÍµêÌïòÍ∏∞ ÎñÑÎ¨∏Ïù¥Îã§.

üí° ÏÑúÎ∏å ÏøºÎ¶¨Ïóê + 1ÏùÑ Ìï¥ÎèÑ ÎêòÎäî Ïù¥Ïú†Îäî, ÏÑúÎ∏å ÏøºÎ¶¨Ïùò Í≤∞Í≥ºÎäî "Îç∞Ïù¥ÌÑ∞ Í∞í" Ïù¥Í∏∞ ÎñÑÎ¨∏Ïù¥Îã§.

ü§î Îì±Ïàò Íµ¨ÌïòÍ∏∞ Î°úÏßÅ  
  - ÏßàÎ¨∏: "ÎÇ¥Î¶ºÏ∞®Ïàú Ï†ïÎ†¨ÏùÄ Ïñ¥ÎîîÏÑú Íµ¨ÌòÑÌïòÎÇò?"
  - Ìï¥Îãµ: ORDER BYÎ°ú Ï§ÑÏùÑ ÏÑ∏Ïö∞Îäî ÎåÄÏã†, ÎÖºÎ¶¨Ï†Å ÎπÑÍµêÎ•º ÏÇ¨Ïö©Ìï®.
  - WHERE ÎÇ®.ÌÅ¨Í∏∞ > ÎÇò.ÌÅ¨Í∏∞ : ÎÇòÎ≥¥Îã§ Îç©Ïπò ÌÅ∞ Ïï†Îì§Ïù¥ Î™á Î™ÖÏù∏ÏßÄ ÏÑºÎã§.
    (ÎÇòÎ≥¥Îã§ ÌÅ∞ Ïï†Îì§ Ïàò) + 1 = ÎÇ¥ Îì±Ïàò

ü§î GROUP BYÍ∞Ä ÌïÑÏöîÌï†Íπå?  
  - "~~Î≥Ñ"Î°ú Íµ¨ÌïòÎäî Í≤ÉÏù¥ ÏïÑÎãàÎùº, ÎåÄÏû•Í∑† Í∞úÏ≤¥Ïùò ÌÅ¨Í∏∞Îßå Îî∞ÏßÑÎã§. ÌïÑÏöîÏóÜÏùÑ Í≤É Í∞ôÎã§.

ü§î "ÎåÄÏû•Í∑† Í∞úÏ≤¥Ïùò ÌÅ¨Í∏∞Î•º ÎÇ¥Î¶ÑÏ∞®ÏàúÏúºÎ°ú Ï†ïÎ†¨ÌñàÏùÑ Îïå" Î∂ÄÎ∂ÑÏùÄ Ïñ¥ÎîîÏóêÏÑú Íµ¨ÌòÑÌï¥ÏïºÌï†Íπå?  
  - FROM ÏóêÏÑú ÏÉàÎ°≠Í≤å ÌÖåÏù¥Î∏îÏùÑ ÎßåÎì†Îã§.

ü§î ÌÖåÏù¥Î∏îÏùÑ ÏÉàÎ°ú ÎßåÎì§Ïñ¥Ïïº ÌïòÎäî Ïù¥Ïú†? (Ïù∏ÎùºÏù∏ Î∑∞)  
  - SQL Ïã§Ìñâ ÏàúÏÑúÏÉÅ `SELECT` Ï†àÏóêÏÑú ÎßåÎì† Î≥ÑÏπ≠(MY_RANK)ÏùÄ Í∞ôÏùÄ `SELECT` ÎÇ¥Ïùò `CASE WHEN`ÏóêÏÑú Î∞îÎ°ú Í∞ÄÏ†∏Îã§ Ïì∏ Ïàò ÏóÜÎäî Í≤ΩÏö∞Í∞Ä ÎßéÎã§.
  - Îî∞ÎùºÏÑú,Í≥ÑÏÇ∞ÌïòÎäî Í≥≥(ÏïàÏ™Ω)Í≥º Î≥¥Ïó¨Ï£ºÎäî Í≥≥(Î∞îÍπ•Ï™Ω)ÏùÑ Î∂ÑÎ¶¨ÌïòÍ∏∞ ÏúÑÌï®Ïù¥Îã§.  
  - Ìö®Í≥º: ÏïàÏ™ΩÏóêÏÑú ÎØ∏Î¶¨ Í≥ÑÏÇ∞Îêú `MY_RANK`ÏôÄ `TOTAL_COUNT`Î•º Î∞îÍπ•Ï™ΩÏóêÏÑúÎäî ÎßàÏπò ÏõêÎûò ÏûàÎçò Ïª¨ÎüºÏ≤òÎüº Ìé∏ÌïòÍ≤å Í∫ºÎÇ¥ Ïì∏ Ïàò ÏûàÎã§.

### üîó Î∞∞Ïö¥Ï†ê
1. ÏÉÅÍ¥Ä ÏÑúÎ∏åÏøºÎ¶¨
   > Î∞îÍπ• ÏøºÎ¶¨Ïùò Í∞í(ÎÇò)ÏùÑ ÏïàÏ™Ω ÏøºÎ¶¨(ÎÇ®)ÏóêÏÑú Ï∞∏Ï°∞Ìï¥ÏÑú ÎπÑÍµêÌïòÎäî Î∞©Ïãù. Î∞òÎìúÏãú ÏÑúÎ°ú Îã§Î•∏ Î≥ÑÏπ≠ÏùÑ ÏÇ¨Ïö©Ìï¥Ïïº ÌïúÎã§.
2. Ïä§ÏπºÎùº ÏÑúÎ∏åÏøºÎ¶¨Ïùò Ïó∞ÏÇ∞
   > Í≤∞Í≥ºÍ∞íÏù¥ 'Ìñâ 1Í∞ú, Ïó¥ 1Í∞ú'Ïù∏ ÏÑúÎ∏å ÏøºÎ¶¨Îäî Ïà´Ïûê Ï∑®Í∏âÏùÑ Î∞õÎäîÎã§. (`SELECT ...`) + 1 Ï≤òÎüº ÏÇ¨ÏπôÏó∞ÏÇ∞Ïù¥ Í∞ÄÎä•ÌïòÎã§.
3. Ïù∏ÎùºÏù∏ Î∑∞
   > FROM Ï†à ÏïàÏóêÏÑú ÏÇ¨Ïö©ÎêòÎäî ÏÑúÎ∏å ÏøºÎ¶¨Î•º 'Ïù∏ÎùºÏù∏ Î∑∞' ÎòêÎäî 'ÌååÏÉù ÌÖåÏù¥Î∏î' Ïù¥ÎùºÍ≥† Î∂ÄÎ•∏Îã§.
4. `CASE WHEN` ÏÇ¨Ïö© ÏúÑÏπò Î∞è ÏòàÏãú
    
    > Í∞íÏù¥ Îì§Ïñ¥Í∞à Ïàò ÏûàÎäî ÏûêÎ¶¨ÎùºÎ©¥ SQL Ïñ¥ÎîîÎì† Îì§Ïñ¥Í∞à Ïàò ÏûàÎã§.
    > 
    - SELECT Ï†à: Îç∞Ïù¥ÌÑ∞Î•º Ï°∞ÌöåÌï† Îïå ÏÉàÎ°úÏö¥ ÎùºÎ≤®(Îì±Í∏â, Ïπ¥ÌÖåÍ≥†Î¶¨)ÏùÑ Î∂ôÏó¨ÏÑú Î≥¥Í≥† Ïã∂ÏùÑ Îïå.
        
        ```sql
        // Ï†êÏàòÏóê Îî∞Îùº 'Ìï©Í≤©'Í≥º 'Î∂àÌï©Í≤©'Ïù¥ÎùºÎäî ÏÉàÎ°úÏö¥ Ïª¨ÎüºÏùÑ ÎßåÎì§Í≥† Ïã∂Îã§.
        SELECT 
            Name, 
            Score,
            CASE 
                WHEN Score >= 80 THEN 'Ìï©Í≤©'
                ELSE 'Î∂àÌï©Í≤©' 
            END AS Result  -- ÏÉàÎ°úÏö¥ Ïª¨Îüº Î≥ÑÏπ≠
        FROM Exams;
        ```
        
    - ‚≠êÔ∏è ORDER BY Ï†à: Í∞ÄÎÇòÎã§Ïàú, Ïà´ÏûêÏàúÏù¥ ÏïÑÎãàÎùº "ÎÇ¥ ÎßàÏùåÎåÄÎ°ú Ï†ïÌïú ÏàúÏÑú"ÎåÄÎ°ú Ï†ïÎ†¨ÌïòÍ≥† Ïã∂ÏùÑ Îïå.
        
        ```sql
        // ÏßÅÍ∏â ÏàúÏÑú(Î∂ÄÏû• -> Í≥ºÏû• -> ÎåÄÎ¶¨)Î°ú Ï†ïÎ†¨ÌïòÍ≥† Ïã∂Îã§.
        // (Í∞ÄÎÇòÎã§ÏàúÏù¥Î©¥ 'Í≥ºÏû•'Ïù¥ 1Îì±Ïù¥ ÎêòÏñ¥Î≤ÑÎ¶º)
        SELECT Name, Position
        FROM Employees
        ORDER BY 
            CASE 
                WHEN Position = 'Î∂ÄÏû•' THEN 1  -- Î∂ÄÏû•ÏùÑ 1ÏàúÏúÑÎ°ú
                WHEN Position = 'Í≥ºÏû•' THEN 2  -- Í≥ºÏû•ÏùÑ 2ÏàúÏúÑÎ°ú
                ELSE 3                         -- ÎÇòÎ®∏ÏßÄÎäî 3ÏàúÏúÑÎ°ú
            END ASC;
        ```
        
    - WHERE Ï†à (Îã§ÏÜå Î≥µÏû°ÌïòÏßÄÎßå Í∞ÄÎä•): Ï°∞Í±¥Ïóê Îî∞Îùº **ÌïÑÌÑ∞ÎßÅ Í∏∞Ï§ÄÍ∞í**ÏùÑ Îã§Î•¥Í≤å Ï†ÅÏö©ÌïòÍ≥† Ïã∂ÏùÑ Îïå
        
        ```sql
        // Ï†ÑÏûêÏ†úÌíà'ÏùÄ 100ÎßåÏõê Ïù¥ÏÉÅÏù∏ Í≤ÉÎßå Î≥¥Í≥†, 'ÏÉùÌôúÏö©Ìíà'ÏùÄ 1ÎßåÏõê Ïù¥ÏÉÅÏù∏ Í≤ÉÎßå Î≥¥Í≥† Ïã∂Îã§.
        SELECT Product, Category, Price
        FROM Items
        WHERE Price >= (
            CASE 
                WHEN Category = 'Ï†ÑÏûêÏ†úÌíà' THEN 1000000
                WHEN Category = 'ÏÉùÌôúÏö©Ìíà' THEN 10000
                ELSE 0
            END
        );
        ```
        
    - ÏßëÍ≥Ñ Ìï®Ïàò ÎÇ¥Î∂Ä (ÌÜµÍ≥Ñ ÎÇº Îïå ÏµúÍ∞ï ‚≠ê): ÏóëÏÖÄÏùò ÌîºÎ≤óÌÖåÏù¥Î∏îÏ≤òÎüº, **Ï°∞Í±¥Î≥Ñ Í∞úÏàòÎÇò Ìï©Í≥Ñ**Î•º Ìïú Î≤àÏóê Íµ¨Ìï† Îïå
        
        ```sql
        // Ï†ÑÏ≤¥ ÌïôÏÉù Ï§ë 'Ìï©Í≤©ÏÉù Ïàò'ÏôÄ 'Î∂àÌï©Í≤©ÏÉù Ïàò'Î•º Ìïú Ï§ÑÏóê Î≥¥Í≥† Ïã∂Îã§.
        SELECT 
            COUNT(*) AS Total_Students,
            SUM(CASE WHEN Score >= 80 THEN 1 ELSE 0 END) AS Pass_Count,
            SUM(CASE WHEN Score < 80 THEN 1 ELSE 0 END) AS Fail_Count
        FROM Exams;
        ```
        
        - `Score >= 80`Ïù¥Î©¥ 1ÏùÑ ÎÇ¥Î±âÍ≤å ÌïòÍ≥†, Í∑∏Í±∏ `SUM`(Îã§ ÎçîÌï®)ÌïòÎãàÍπå Ìï©Í≤©Ïûê ÏàòÍ∞Ä Îê©ÎãàÎã§.
5. ÏÑúÎ∏å ÏøºÎ¶¨ ÏÇ¨Ïö© ÏúÑÏπò Î∞è ÏòàÏãú
    
    > Í±∞Ïùò Î™®Îì† Í≥≥Ïóê Îì§Ïñ¥Í∞à Ïàò ÏûàÎã§. ÏÑúÎ∏åÏøºÎ¶¨Îäî Î≥∏ÏßàÏ†ÅÏúºÎ°ú "Í≤∞Í≥ºÍ∞í(Îç∞Ïù¥ÌÑ∞)"Ïù¥Í∏∞ ÎïåÎ¨∏Ïù¥Îã§.
    > 
    - SELECT Ï†à (Ïä§ÏπºÎùº ÏÑúÎ∏åÏøºÎ¶¨)
        - "Í∞í ÌïòÎÇò"Î•º Ïèô ÎΩëÏïÑÏôÄÏÑú Ïª¨ÎüºÏ≤òÎüº Î≥¥Ïó¨Ï§Ñ Îïå.
        - Î∞òÎìúÏãú Í≤∞Í≥ºÍ∞Ä 1Ìñâ 1Ïó¥Ïù¥Ïñ¥Ïïº Ìï®. (Ïà´Ïûê ÌïòÎÇò, Î¨∏Ïûê ÌïòÎÇò)
        
        ```sql
        // Î™®Îì† ÏßÅÏõêÏùò ÏõîÍ∏âÏùÑ Ï∂úÎ†•ÌïòÎ©¥ÏÑú, ÏòÜÏóê 'Ï†ÑÏ≤¥ ÏßÅÏõê ÌèâÍ∑† ÏõîÍ∏â'ÎèÑ Í∞ôÏù¥ Î≥¥Ïó¨Ï£ºÍ≥† Ïã∂ÏùÑ Îïå.
        SELECT 
            Name, 
            Salary, 
            (SELECT AVG(Salary) FROM Employees) AS Avg_Salary --  Ïó¨Í∏∞Í∞Ä ÏÑúÎ∏åÏøºÎ¶¨
        FROM Employees;
        ```
        
    - FROM Ï†à (Ïù∏ÎùºÏù∏ Î∑∞ ‚≠ê)
        - "Í∞ÄÏÉÅÏùò ÌÖåÏù¥Î∏î"ÏùÑ ÎßåÎì§Ïñ¥ÏÑú Í±∞Í∏∞ÏÑú Îã§Ïãú Ï°∞ÌöåÌï† Îïå.
        - Î∞òÎìúÏãú Î≥ÑÏπ≠ÏùÑ ÏßÄÏñ¥Ï§òÏïº Ìï®.
        
        ```sql
        // Ïù¥ÎØ∏ Ìïú Î≤à Í∞ÄÍ≥µÎêú Îç∞Ïù¥ÌÑ∞(Ïòà: Î∂ÄÏÑúÎ≥Ñ ÌèâÍ∑† Ïó∞Î¥â) Ï§ëÏóêÏÑú, Îã§Ïãú 5,000 Ïù¥ÏÉÅÏù∏ Í≤ÉÎßå ÎΩëÍ≥† Ïã∂ÏùÑ Îïå.
        SELECT *
        FROM (
            -- Ïù¥ ÏïàÏ™Ω ÏøºÎ¶¨ Í≤∞Í≥ºÍ∞Ä ÎßàÏπò 'TempTable'Ïù¥ÎùºÎäî Ïã§Ï†ú ÌÖåÏù¥Î∏îÏù∏ Í≤ÉÏ≤òÎüº ÎèôÏûëÌï®
            SELECT Dept, AVG(Salary) as AvgSal
            FROM Employees
            GROUP BY Dept
        ) AS TempTable 
        WHERE AvgSal >= 5000;
        ```
        
        - SQL Ïã§Ìñâ ÏàúÏÑúÏÉÅ `GROUP BY` Ìïú Í≤∞Í≥ºÎ•º Î∞îÎ°ú `WHERE` Ï†àÏóêÏÑú ÌïÑÌÑ∞ÎßÅÌïòÍ∏∞ ÍπåÎã§Î°úÏö∏ Îïå, Ïù¥Î†áÍ≤å "ÏûÑÏãú ÌÖåÏù¥Î∏î"Î°ú ÎßåÎì§Ïñ¥Î≤ÑÎ¶¨Î©¥ ÏïÑÏ£º Ìé∏ÌïòÎã§.
    - WHERE Ï†à (Ï§ëÏ≤© ÏÑúÎ∏åÏøºÎ¶¨)
        - ÎπÑÍµêÌï† Í∏∞Ï§ÄÍ∞íÏù¥ÎÇò ÌÅ¨Î¶¨Ïä§Ìä∏Î°ú ÏÇ¨Ïö©Ìï† Îïå.
        
        ```sql
        // Í∞í ÌïòÎÇòÎûë ÎπÑÍµêÌï† Îïå (=, >, <): Ï≤†ÏàòÎ≥¥Îã§ ÏõîÍ∏â ÎßéÏù¥ Î∞õÎäî ÏÇ¨Îûå ÎàÑÍµ¨Ïïº?
        SELECT Name 
        FROM Employees
        WHERE Salary > (SELECT Salary FROM Employees WHERE Name = 'Ï≤†Ïàò');
        ```
        
        ```sql
        // Î¶¨Ïä§Ìä∏Îûë ÎπÑÍµêÌï† Îïå (IN): Í∞úÎ∞úÌåÄÏù¥ÎÇò ÎîîÏûêÏù∏ÌåÄÏóê ÏÜçÌïú ÏÇ¨Îûå Îã§ ÎÇòÏôÄ.
        SELECT Name 
        FROM Employees
        WHERE Dept_ID IN (SELECT Dept_ID FROM Departments WHERE Name IN ('Í∞úÎ∞ú', 'ÎîîÏûêÏù∏'));
        ```
        
    - HAVING Ï†à
        - Í∑∏Î£πÌïëÎêú Í≤∞Í≥º(`GROUP BY`)Î•º ÌïÑÌÑ∞ÎßÅÌï† Îïå Í∏∞Ï§ÄÍ∞íÏúºÎ°ú ÏÇ¨Ïö©.
        
        ```sql
        // Ïö∞Î¶¨ Î∂ÄÏÑú ÌèâÍ∑† ÏõîÍ∏âÏù¥ ÌöåÏÇ¨ Ï†ÑÏ≤¥ ÌèâÍ∑† ÏõîÍ∏âÎ≥¥Îã§ ÎÜíÏùÄ Î∂ÄÏÑúÎäî Ïñ¥Îîî?
        SELECT Dept, AVG(Salary)
        FROM Employees
        GROUP BY Dept
        HAVING AVG(Salary) > (SELECT AVG(Salary) FROM Employees); -- üñêÔ∏è ÌöåÏÇ¨ Ï†ÑÏ≤¥ ÌèâÍ∑†
        ```
